<!DOCTYPE HTML>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <script src="http://cdn.leafletjs.com/leaflet/v1.7.1/leaflet.js"></script>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v1.7.1/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css">
  <style>
    html,
    body {
      height: 100%;
      padding: 0;
      margin: 0;
    }

    #map {
      /* configure the size of the map */
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
  <script src='https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js'></script>

  <div id="map"></div>

  <script>
    // initialize Leaflet
    var map = L.map('map').setView({ lon: 11.5, lat: 46.5 }, 9);

    // add the OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap contributors</a>'
    }).addTo(map);

    // show the scale bar on the lower left corner
    L.control.scale().addTo(map);

    // read KML file into flurnamenLayer
    var flurnamenLayer = omnivore.kml("Bruneck.kml")
      .on("ready", function () {

        // fit map to layer boundaries
        map.fitBounds(flurnamenLayer.getBounds());

        // create group of markers to be clustered (via markercluster plugin)
        var clusteredMarkers = L.markerClusterGroup(
          {
            // set markercluster options; full list see https://github.com/Leaflet/Leaflet.markercluster#all-options
            showCoverageOnHover: false, // = When you mouse over a cluster it shows the bounds of its markers
            zoomToBoundsOnClick: true   // = When you click a cluster we zoom to its bounds
          }
        );

        // add group of markers to layer
        clusteredMarkers.addLayer(flurnamenLayer);

        // for each marker, run a function
        flurnamenLayer.eachLayer(function (singleMarker) {
          // build content of a marker popup (in HTML)
          let popupContent = '<strong>' + singleMarker.feature.properties.name + '</strong><br />' + singleMarker.feature.properties.description;

          // bind popup to marker
          singleMarker.bindPopup(popupContent);
        });

        // add everything to the map
        clusteredMarkers.addTo(map);
      });
  </script>


</body>

</html>